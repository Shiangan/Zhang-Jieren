<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    
    <meta property="og:title" content="ã€è¿½æ€ã€‘å¼µå‚‘ä» å…ˆç”Ÿ é›²ç«¯è¨ƒå‘Š">
    <meta property="og:description" content="å¾·ç¯„é•·å­˜ï¼Œæ°¸èªŒä¸€å¿ƒã€‚æ•¬é‚€è¦ªå‹é™ªä¼´å‚‘ä»å…ˆç”Ÿèµ°å®Œå¡µä¸–æœ€å¾Œä¸€è¶Ÿæ—…ç¨‹ã€‚">
    <link rel="icon" href="image/logo.ico" type="image/png">
    <meta property="og:image" content="image/Write.png">
    <meta property="og:type" content="website">
    
    <title>æ°¸æ†æ€å¿µï¼šå¼µå‚‘ä» å…ˆç”Ÿ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@300;400;600;900&display=swap" rel="stylesheet">
    
    <style>
        @font-face { font-family: 'ZF-Font'; src: url('Zf-Font.ttf') format('truetype'); font-display: swap; }
        @font-face { font-family: 'Iansui'; src: url('Iansui-Regular.ttf') format('truetype'); font-display: swap; }
        
        :root { 
            --bg-deep: #e8e2d6;    
            --paper: #f2ede4;      
            --card-inner: rgba(232, 226, 214, 0.6); 
            --ink: #2a2a2a;        
            --gold-dark: #8e735b;  
            --gold-light: #b4977a; 
            --sub-ink: #666666;    
            --max-w: 480px; 
        }
        
        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; margin: 0; padding: 0; }
        
        html, body { 
            width: 100%; 
            overflow-x: hidden; 
            background-color: var(--bg-deep); 
            color: var(--ink); 
            font-family: 'Iansui', 'Noto Serif TC', serif; 
            line-height: 1.8; 
            word-break: keep-all; 
        }
        
        .u-block { display: inline-block; white-space: nowrap; }
        
        .app-wrapper { 
            width: 100%; 
            max-width: var(--max-w); 
            margin: 0 auto; 
            position: relative; 
            background: var(--paper); 
            min-height: 100vh; 
            box-shadow: 0 0 60px rgba(0,0,0,0.08); 
        }

        .bg-watermark { 
            position: fixed; bottom: 12%; left: 50%; transform: translateX(-50%); 
            font-size: 85px; font-weight: 300; color: rgba(142, 115, 91, 0.04); 
            letter-spacing: 20px; z-index: 0; pointer-events: none; white-space: nowrap;
        }

        .header-top { text-align: center; padding: 45px 20px 10px; position: relative; z-index: 10; }
        .top-logo { width: 100px; opacity: 0.8; margin-bottom: 20px; }
        .top-action-bar { display: flex; justify-content: center; gap: 15px; }
        .top-btn { 
            display: flex; align-items: center; gap: 6px; padding: 10px 20px; border-radius: 30px; 
            font-size: 13px; font-weight: 600; text-decoration: none; 
            border: 1px solid rgba(142, 115, 91, 0.3); 
            background: rgba(232, 226, 214, 0.5); color: var(--sub-ink); 
        }
        .top-btn img { width: 15px; opacity: 0.6; }

        header { text-align: center; padding: 30px 0 50px; }
        .intro-text { font-size: 16px; letter-spacing: 6px; color: var(--gold-dark); margin-bottom: 30px; font-weight: 500; }
        .main-photo-wrap { position: relative; width: 85%; margin: 0 auto; }
        .main-photo { 
            width: 100%; border-radius: 2px; 
            box-shadow: 0 25px 50px rgba(0,0,0,0.15); 
            border: 1px solid rgba(255,255,255,0.4);
        }
        .name-wrapper { font-size: clamp(36px, 10vw, 48px); font-weight: 900; letter-spacing: 0.2em; margin: 35px 0 10px; color: var(--ink); }
        .life-range { font-size: 14px; letter-spacing: 3px; color: var(--gold-dark); font-weight: 600; line-height: 2; }

        section { padding: 70px 28px; position: relative; z-index: 1; opacity: 0; transform: translateY(30px); transition: 1.5s cubic-bezier(0.16, 1, 0.3, 1); }
        section.visible { opacity: 1; transform: translateY(0); }
        .section-title { 
            font-size: 20px; letter-spacing: 10px; color: var(--gold-dark); font-weight: 700; 
            margin-bottom: 45px; display: block; text-align: center; 
        }
        .section-title::after { content: ""; display: block; width: 30px; height: 1.5px; background: var(--gold-light); margin: 15px auto 0; opacity: 0.5; }
        
        .img-inner { width: 100%; border-radius: 2px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); display: block; margin: 0 auto 30px; }

        .obituary-wrap { padding: 8px; background: var(--bg-deep); border-radius: 2px; box-shadow: inset 0 0 15px rgba(0,0,0,0.05); }
        .obituary-img { width: 100%; display: block; cursor: zoom-in; }

        .date-hero { font-size: 78px; font-weight: 900; line-height: 1; text-align: center; letter-spacing: -3px; color: var(--ink); }
        .date-sub { text-align: center; font-size: 15px; letter-spacing: 3px; color: var(--sub-ink); margin-top: 15px; }
        
        .time-timeline { margin: 50px 0; display: flex; flex-direction: column; align-items: center; gap: 30px; }
        .time-box { display: flex; align-items: center; gap: 25px; }
        .time-tag { font-size: 20px; color: var(--gold-dark); width: 60px; font-weight: 700; text-align: right; }
        .time-main { font-size: 30px; font-weight: 800; color: var(--ink); border-left: 2px solid var(--gold-light); padding-left: 25px; line-height: 1; }

        .notice-card { 
            background: rgba(180, 151, 122, 0.05); border: 1px solid rgba(180, 151, 122, 0.15); 
            border-radius: 8px; padding: 25px 20px; margin-top: 30px; 
        }
        .notice-item { 
            font-size: 13px; color: var(--sub-ink); margin-bottom: 12px; 
            display: flex; align-items: flex-start; line-height: 1.6; text-align: justify; 
        }
        .notice-item::before { content: "â€§"; color: var(--gold-light); font-weight: 900; margin-right: 8px; }

        .info-card { 
            border-radius: 8px; padding: 35px 25px; margin-bottom: 25px; 
            background: var(--card-inner); 
            border: 1px solid rgba(142, 115, 91, 0.15);
            text-align: center;
        }
        .info-label { font-size: 20px; color: var(--gold-dark); font-weight: 700; letter-spacing: 4px; margin-bottom: 15px; display: block; }
        .info-value { font-size: 22px; font-weight: 700; color: var(--ink); line-height: 1.6; }
        .info-sub { font-size: 14px; color: var(--sub-ink); margin-top: 8px; }

        .btn-action { 
            display: block; width: 100%; padding: 20px; text-align: center; text-decoration: none; 
            font-size: 13px; letter-spacing: 5px; font-weight: 700; border-radius: 2px; 
            transition: 0.4s; margin-top: 15px;
        }
        .btn-outline { border: 1px solid var(--gold-dark); color: var(--gold-dark); }
        .btn-solid { background: var(--gold-dark); color: var(--paper); border: none; }

        .tool-drawer { margin-bottom: 15px; border-radius: 2px; overflow: hidden; background: rgba(232, 226, 214, 0.4); border: 1px solid rgba(142, 115, 91, 0.1); }
        .drawer-btn { 
            width: 100%; padding: 25px; background: none; border: none; text-align: left; 
            font-size: 15px; font-weight: 600; color: var(--ink); display: flex; justify-content: space-between; align-items: center; cursor: pointer;
        }
        .drawer-content { display: none; padding: 25px; background: rgba(232, 226, 214, 0.2); border-top: 1px solid rgba(142, 115, 91, 0.1); }
        
        .img-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .grid-item { text-align: center; cursor: pointer; }
        .grid-item img { width: 100%; border-radius: 1px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); }
        .grid-item p { font-size: 18px; color: var(--ink); margin-top: 10px; font-weight: 700; }
        .grid-item span { font-size: 12px; color: var(--gold-dark); font-weight: 700; display: block; margin-top: 2px; }

        .calligraphy-area { padding: 130px 10px; background: var(--bg-deep); }
        .ink-wrap { display: flex; flex-direction: row-reverse; justify-content: center; gap: 20px; height: 620px; }
        .ink-line { 
            writing-mode: vertical-rl; font-family: 'ZF-Font', serif; font-size: 24px; 
            letter-spacing: 10px; color: var(--sub-ink); white-space: nowrap;
        }
        .ink-char { opacity: 0; display: inline-block; transition: opacity 0.5s ease; }
        .ink-char.show { opacity: 1; }

        .contact-box { background: rgba(142, 115, 91, 0.05); padding: 40px 25px; border-radius: 2px; margin: 0 28px 25px; border: 1px solid rgba(142, 115, 91, 0.1); text-align: center; }
        .contact-btns { display: flex; gap: 12px; margin-top: 25px; }
        .c-btn { flex: 1; padding: 16px; border-radius: 2px; text-decoration: none; font-size: 13px; font-weight: 700; color: #fff; text-align: center; }

        .float-nav { position: fixed; bottom: 40px; right: 20px; z-index: 999; display: flex; flex-direction: column; gap: 18px; }
        .float-nav img { width: 62px; filter: drop-shadow(0 12px 20px rgba(0,0,0,0.18)); }
        
        #lightbox { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(26,26,26,0.98); display:none; justify-content:center; align-items:center; z-index:10000; padding: 20px; }
        #lightbox img { max-width: 100%; max-height: 92%; object-fit: contain; }
        
        footer { padding: 80px 25px 150px; text-align: center; font-size: 22px; font-weight: 700; letter-spacing: 12px; color: var(--gold-dark); opacity: 0.5; }
    </style>
</head>
    <div class="app-wrapper">
    <div class="bg-watermark">MEMORY</div>

<body oncontextmenu="return false">
    <audio id="bgm" loop><source src="Misson Part 1.mp3" type="audio/mp3"></audio>

<div class="app-wrapper">
    <div class="bg-watermark">MEMORY</div>

    <div class="header-top">
        <img src="image/logo.ico" class="top-logo">
        <div class="top-action-bar">
            <a href="javascript:void(0)" class="top-btn" onclick="copyText()"><img src="https://img.icons8.com/material-outlined/24/777777/copy.png"> è¤‡è£½è³‡è¨Š</a>
            <a href="javascript:void(0)" class="top-btn" onclick="shareLine()"><img src="https://img.icons8.com/material-rounded/24/8e735b/line-me.png"> åˆ†äº«è¦ªå‹</a>
        </div>
    </div>


    <header>
        <div class="name-wrapper u-block">å¼µå‚‘ä» å…ˆç”Ÿ</div>
        <div class="life-range">
            <span class="u-block">1930 ï½ 2026</span><br>
        </div>
    </header>

    <main>
        <section class="reveal">
            <img src="image/IMG_7504.jpeg" class="img-inner" onclick="zoom(this.src)">
            <div style="text-align: center; margin-top: 50px;">
                <p style="font-size: 18px; font-weight: 600; letter-spacing: 4px; margin-bottom: 25px; color: var(--gold-dark);">å¾·ç¯„é•·å­˜ï¼Œæ°¸èªŒä¸€å¿ƒ</p>
                <p style="font-size: clamp(15px, 4.2vw, 17px); color: var(--sub-ink); line-height: 2.8; letter-spacing: 1.8px; padding: 0 15px;">
                    æˆ‘å€‘æœ€æ•¬æ„›çš„çˆ¶è¦ª <span class="u-block" style="font-weight: 700; color: var(--ink); font-size: 1.1em;">å¼µå‚‘ä» å…ˆç”Ÿ</span><br>
                    æ–¼å®¶äººå€‘çš„é™ªä¼´èˆ‡æ€å¿µä¸­ï¼Œ<br>
                    <span class="u-block">åœ“æ»¿å¡µä¸–æ—…ç¨‹ï¼Œå®‰ç¥¥è¾­ä¸–ã€‚</span><br>
                    <span class="u-block">ç•™ä¸‹çš„æº«æš–èˆ‡æ•™èª¨ï¼Œå°‡æ°¸é ç…§äº®æˆ‘å€‘ã€‚</span><br><br>
                    è¬¹æ“‡æ–¼<br>
                    <span class="u-block" style="color: var(--ink); font-weight: 600;">æ°‘åœ‹ 115 å¹´ 03 æœˆ 09 æ—¥ (æ˜ŸæœŸä¸€)</span>ï¼Œ<br>
                    æ–¼ <span class="u-block" style="color: var(--ink); font-weight: 600;">æ–°åŒ—å¸‚ç«‹æ®¯å„€é¤¨ ï¼» å´‡ä»å»³ ï¼½</span><br>
                    èˆ‰è¾¦è¿½æ€å‘Šåˆ¥å¥ ç¦®
                </p>
            </div>
        </section>

        <section class="reveal">
            <span class="section-title">è¨ƒå‘Šæ­£æœ¬å…¬å‘Š</span>
            <div class="obituary-wrap">
                <img src="image/IMG_7405.jpeg" class="obituary-img" onclick="zoom(this.src)">
            </div>
            <p style="text-align: center; font-size: 13px; color: var(--sub-ink); margin-top: 20px; letter-spacing: 2px;">( é»æ“Šåœ–ç‰‡å¯æ”¾å¤§é–±è®€ )</p>
        </section>

        <section class="reveal">
            <span class="section-title">è¿½æ€å¥ ç¦® â€§ å„€ç¨‹</span>
            <div class="date-hero">03.09</div>
            <div class="date-sub">æ°‘åœ‹ 115 å¹´ â€§ åœ‹æ›†ä¸‰æœˆä¹æ—¥ (æ˜ŸæœŸä¸€)</div>
            
            <div class="time-timeline">
                <div class="time-box"><span class="time-tag">å®¶å¥ ç¦®</span><span class="time-main">11ï¼š20</span></div>
                <div class="time-box"><span class="time-tag">å…¬å¥ ç¦®</span><span class="time-main">12ï¼š00</span></div>
            </div>

            <div class="info-card">
                <span class="info-label">å‘Šåˆ¥å¼æœƒå ´</span>
                <div class="info-value">æ–°åŒ—å¸‚ç«‹æ®¯å„€é¤¨</div>
                <div class="info-value">[ å´‡ä»å»³ ]</div>
                <div class="info-sub">æ–°åŒ—å¸‚æ¿æ©‹å€ä¸­æ­£è·¯560è™Ÿ</div>
            </div>

            <div class="info-card" style="margin-top: 20px; border-style: dashed;">
                <span class="info-label">å¹³æ—¥å®‰éˆåœ°é»</span>
                <div class="info-value">æ¿æ©‹æ®¯å„€é¤¨</div>
                <div class="info-value">ç‰Œä½å€ [ No. 138 ]</div>
                <div class="info-sub">è¦ªå‹å¹³æ—¥å¯å‰å¾€ä¸Šé¦™å¼”å”</div>
            </div>

            <div class="notice-card">
                <div class="notice-item">è«‹è‘—æ•´é½Šã€æ¨¸ç´ è¡£ç‰©å‡ºå¸­ï¼Œä»¥è¡¨å°Šæ•¬èˆ‡è¿½æ€ä¹‹æ„ã€‚</div>
                <div class="notice-item">æ®¯å„€é¤¨å…§è«‹å‹¿èªªã€Œå†è¦‹ã€ï¼Œä»¥ã€Œå¹³å®‰ã€ä»£æ›¿å³å¯ã€‚</div>
                <div class="notice-item">å¥ ç¦®æœƒå ´å‚™æœ‰æ·¨æ°´ï¼Œè‹¥æœ‰éœ€è¦å¯ä»¥è‡ªè¡Œå–ç”¨ã€‚</div>
                <div class="notice-item">è‹¥å› å®—æ•™ä¿¡ä»°ä¸æ–¹ä¾¿æŒé¦™ï¼Œèˆ‡å·¥ä½œäººå“¡ç¤ºæ„å³å¯ã€‚</div>
                <a href="https://maps.app.goo.gl/fpQsUJTcab3UNj8t8?g_st=ic" target="_blank" class="btn-action btn-outline">ğŸ“ é–‹å•Ÿåœ°åœ–å°èˆª (æ¿æ®¯)</a>
            </div>
            <a href="javascript:void(0)" class="btn-action btn-solid" onclick="addCal()">ğŸ“… åŠ å…¥æ‰‹æ©Ÿè¡Œäº‹æ›†</a>
        </section>

        
           <section class="reveal">
            <span class="section-title">è‡´æ„è³‡è¨Šå°å¼•</span>
            <div class="tool-drawer">
                <button class="drawer-btn" onclick="toggleD(this, 'flower')"> è‡´æ„èŠ±ç¦®æ¨£å¼ <span>+</span></button>
                <div id="flower" class="drawer-content">
                    <div class="img-grid">
                        <div class="grid-item" onclick="zoom('image/èŠ±ç±ƒAæ¬¾.JPG')"><img src="image/èŠ±ç±ƒAæ¬¾.JPG"><p>æ¨£å¼ A</p><span>NT$ 2,500 / å°</span></div>
                        <div class="grid-item" onclick="zoom('image/èŠ±ç±ƒBæ¬¾.JPG')"><img src="image/èŠ±ç±ƒBæ¬¾.JPG"><p>æ¨£å¼ B</p><span>NT$ 3,000 / å°</span></div>
                        <div class="grid-item" onclick="zoom('image/èŠ±ç±ƒCæ¬¾.JPG')"><img src="image/èŠ±ç±ƒCæ¬¾.JPG"><p>æ¨£å¼ C</p><span>NT$ 3,500 / å°</span></div>
                        <div class="grid-item" onclick="zoom('image/èŠ±ç±ƒDæ¬¾.JPG')"><img src="image/èŠ±ç±ƒDæ¬¾.JPG"><p>æ¨£å¼ D</p><span>NT$ 4,500 / å°</span></div>
                        <div class="grid-item" onclick="zoom('image/èŠ±ç±ƒEæ¬¾.JPG')"><img src="image/èŠ±ç±ƒEæ¬¾.JPG"><p>æ¨£å¼ E</p><span>NT$ 4,500 / å°</span></div>
                        <div class="grid-item" onclick="zoom('image/èŠ±ç±ƒFæ¬¾.JPG')"><img src="image/èŠ±ç±ƒFæ¬¾.JPG"><p>æ¨£å¼ F</p><span>NT$ 5,500 / å°</span></div>
                        <div class="grid-item" onclick="zoom('image/èŠ±ç±ƒGæ¬¾.JPG')"><img src="image/èŠ±ç±ƒGæ¬¾.JPG"><p>æ¨£å¼ G</p><span>NT$ 6,000 / å°</span></div>
                        <div class="grid-item" onclick="zoom('image/èŠ±ç±ƒHæ¬¾.JPG')"><img src="image/èŠ±ç±ƒHæ¬¾.JPG"><p>æ¨£å¼ H</p><span>NT$ 6,500 / å°</span></div>
                    </div>
                    <div class="contact-box" style="margin-top: 20px;">
                        <span class="info-label">ç·šä¸Šè¨‚è³¼èŠ±ç¦®</span>
                        <div style="font-size: 18px; font-weight: 700;">é™³æŸå…ƒ å…ˆç”Ÿ</div>
                        <div class="contact-btns">
                            <a href="tel:0938179858" class="c-btn" style="background:var(--gold-dark);">æ’¥æ‰“é›»è©±</a>
                            <a href="https://line.me/ti/p/nZJmE8-b6X" class="c-btn" style="background:#4a5d4e;">LINE è¯ç¹«</a>
                        </div>
                    </div>
                </div>
            </div>
               <div class="tool-drawer">
                <button class="drawer-btn" onclick="toggleD(this, 'map_ref')">æœƒå ´äº¤é€šå¼•å° <span>+</span></button>
                <div id="map_ref" class="drawer-content">
                    <div class="img-grid">
                        <div class="grid-item" onclick="zoom('image/æ¿æ©‹æ®¯å„€é¤¨å¹³é¢åœ–.png')"><img src="image/æ¿æ©‹æ®¯å„€é¤¨å¹³é¢åœ–.png"></div>
                        <div class="grid-item" onclick="zoom('image/ç¥¥å®‰è³‡è¨Š-æ¿æ®¯.png')"><img src="image/ç¥¥å®‰è³‡è¨Š-æ¿æ®¯.png"></div>
                    </div>
                </div>
            </div>
        </section>

        <div class="calligraphy-area" id="thanksSec">
            <div class="ink-wrap">
                <div class="ink-line" data-text="è‡´ æ¯ä¸€ä½æº«æš–çš„æ‚¨"></div>
                <div class="ink-line" data-text="è¬è¬é€™æ®µæ—¥å­çš„é—œæ‡·èˆ‡é™ªä¼´"></div>
                <div class="ink-line" data-text="æ¯ä¸€å¥å•å€™ æ¯ä¸€ä»½æƒ…èª¼"></div>
                <div class="ink-line" data-text="éƒ½åœ¨æˆ‘å€‘å¿ƒä¸­ åŒ–ä½œæœ€æš–çš„å…‰"></div>
                <div class="ink-line" data-text="é€™ä»½çœŸèª åšæƒ… æˆ‘å€‘å°‡æ°¸èªŒæ–¼å¿ƒ"></div>
                <div class="ink-line" data-text="é¡˜ æ¯ä¸€ä½è¦ªå‹å¹³å®‰é †å¿ƒ"></div>
                <div class="ink-line" data-text="å…¨é«”å®¶çœ· å©è¬" style="margin-top: 150px; color: var(--ink); font-weight: 700;"></div>
            </div>
        </div>

        <div class="contact-box" style="margin-bottom: 80px;">
            <span class="info-label">ç¦®å„€æœå‹™</span>
            <div style="font-size: 19px; font-weight: 700;">é™³æŸå…ƒ å…ˆç”Ÿ</div>
            <div class="contact-btns">
                <a href="tel:0938179858" class="c-btn" style="background:var(--gold-dark);">æ’¥æ‰“é›»è©±</a>
                <a href="https://line.me/ti/p/nZJmE8-b6X" class="c-btn" style="background:#4a5d4e;">LINE è¯ç¹«</a>
            </div>
        </div>

        <footer>ç¥¥å®‰ç”Ÿå‘½æœ‰é™å…¬å¸</footer>
    </main>
</div>

<div class="float-nav">
    <a href="tel:0938179858"><img src="image/24å°æ™‚å°ˆç·š.png"></a>
    <a href="https://line.me/ti/p/nZJmE8-b6X"><img src="image/è¯ç¹«line.PNG"></a>
</div>

<div id="lightbox" onclick="closeLightbox()"><img id="lbi" onclick="event.stopPropagation()"></div>

<script>
    const lb = document.getElementById('lightbox');
    const lbi = document.getElementById('lbi');

    const FULL_INFO = `ã€ğŸ€è¿½æ€å‘Šåˆ¥ã€‘å¼µå‚‘ä» å…ˆç”Ÿ

ğŸ•¯ï¸ å¥ ç¦®æ—¥æœŸï¼šæ°‘åœ‹ 115 å¹´ 03 æœˆ 09 æ—¥ (æ˜ŸæœŸä¸€)
ğŸ•¯ï¸ å®¶å¥ ç¦®ï¼šä¸Šåˆ 11ï¼š20
ğŸ•¯ï¸ å…¬å¥ ç¦®ï¼šä¸Šåˆ 12ï¼š00
ğŸ“ å¥ ç¦®åœ°é»ï¼šæ–°åŒ—å¸‚ç«‹æ®¯å„€é¤¨
ğŸ“ å¥ ç¦®ç¦®å»³ï¼š ï¼» å´‡ä»å»³ ï¼½

ğŸ  å®‰éˆåœ°é»ï¼šæ¿æ©‹æ®¯å„€é¤¨
ğŸ“ ä½ç½®ï¼šç‰Œä½å€ [ No. 138 ]

ğŸŒ¹æ•¬é‚€æ‚¨ä¸€åŒåƒèˆ‡ï¼Œå®¶äººå€‘èª æ‘¯æ„Ÿè¬

ğŸ”— é›²ç«¯è¨ƒå‘Šè©³æƒ…ï¼š${window.location.href}`;

    function startWriting() {
        const lines = document.querySelectorAll('.ink-line');
        lines.forEach((line, lineIdx) => {
            const text = line.getAttribute('data-text');
            if(!text) return;
            line.innerHTML = ''; 
            [...text].forEach((char, charIdx) => {
                const span = document.createElement('span');
                span.className = 'ink-char';
                span.innerText = char;
                line.appendChild(span);
                setTimeout(() => { span.classList.add('show'); }, (lineIdx * 1200) + (charIdx * 150)); 
            });
        });
    }

    const obs = new IntersectionObserver(es => {
        es.forEach(e => {
            if (e.isIntersecting) {
                e.target.classList.add('visible');
                if(e.target.id === 'thanksSec') startWriting();
            }
        });
    }, { threshold: 0.1 });
    document.querySelectorAll('section, .calligraphy-area').forEach(s => obs.observe(s));

    document.addEventListener('click', () => {
        const bgm = document.getElementById('bgm');
        if(bgm.paused) { bgm.volume = 0.4; bgm.play().catch(()=>{}); }
    }, { once: true });

    function toggleD(btn, id) {
        const content = document.getElementById(id);
        const isOpen = content.style.display === 'block';
        content.style.display = isOpen ? 'none' : 'block';
        btn.querySelector('span').innerText = isOpen ? '+' : '-';
        btn.parentElement.style.background = isOpen ? "rgba(232, 226, 214, 0.4)" : "rgba(232, 226, 214, 0.8)";
    }

    function zoom(src) { lbi.src = src; lb.style.display = 'flex'; document.body.style.overflow = 'hidden'; }
    function closeLightbox() { lb.style.display = 'none'; document.body.style.overflow = 'auto'; }

    function copyText() {
        const t = document.createElement("textarea"); 
        t.value = FULL_INFO;
        document.body.appendChild(t); t.select(); 
        document.execCommand('copy');
        document.body.removeChild(t); 
        alert("å¥ ç¦®åŠå®‰éˆè³‡è¨Šå·²è¤‡è£½ã€‚");
    }

    function shareLine() { 
        window.location.href = `https://line.me/R/msg/text/?${encodeURIComponent(FULL_INFO)}`; 
    }

    function addCal() { 
        window.open(`https://www.google.com/calendar/render?action=TEMPLATE&text=å¼µå‚‘ä»å…ˆç”Ÿè¿½æ€å¥ ç¦®&dates=20260309T103000/20260309T123000&details=${encodeURIComponent('æ–°åŒ—å¸‚ç«‹æ®¯å„€é¤¨ï¼»å´‡ä»å»³ï¼½')}&location=${encodeURIComponent('æ–°åŒ—å¸‚å¸‚ç«‹æ®¯å„€é¤¨')}`); 
    }
</script>
</body>
</html>
